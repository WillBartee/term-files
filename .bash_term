parse_git_branch() {
    BRANCH_NAME=`git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/\1/'`
    if [ $BRANCH_NAME = "master" ] ; then
      echo -ne $RED
    fi
    echo -ne $BRANCH_NAME$NONE
}

numFiles() {
	ls -1a | wc -l | sed 's: ::g'
}

fileSize() {
	ls -lah | grep -m 1 total | sed 's/total //'
}

parseCygPath() {
  pwd | sed 's/\/cygdrive\/c\///'
}

TERM_TITLE="\e]0;\$(parseCygPath)\a"
OPEN_BRACKET="$LCYAN[$NONE"
CLOSE_BRACKET="$LCYAN]$NONE"

PROMPT_PROC_CT="$OPEN_BRACKET$YELLOW\j$CLOSE_BRACKET"
PROMPT_HIST_NUM="$OPEN_BRACKET$CYAN\!$CLOSE_BRACKET"
PROMPT_USER="$YELLOW\u$DGRAY@$YELLOW\h$NONE "
PROMPT_DIR="$LCYAN\$(parseCygPath)$NONE \$(numFiles) files, \$(fileSize)b "
PROMPT_BRANCH="$OPEN_BRACKET\$(parse_git_branch)$CLOSE_BRACKET"

if [ $0 = "/usr/bin/bash" ]; then
  echo 'This is Git Bash'
  export PS1="\n$LCYAN[GitBash]$NONE\[\e[30;1m\]\[\016\]\[\017\](\[\e[34;1m\]\u@\h\[\e[30;1m\])-(\[\e[34;1m\]\j\[\e[30;1m\])-(\[\e[34;1m\]\@ \d\[\e[30;1m\])->\[\e[30;1m\]\n\[\016\]\[\017\](\[\[\e[32;1m\]\w\[\e[30;1m\])[\$(git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/\1/')](\[\e[32;1m\]\$(/bin/ls -1 | /usr/bin/wc -l | /bin/sed 's: ::g') files, \$(/bin/ls -lah | /bin/grep -m 1 total | /bin/sed 's/total //')b\[\e[30;1m\])--> \[\e[0m\]"
else
	export PS1="\n$TERM_TITLE$PROMPT_PROC_CT$PROMPT_HIST_NUM $PROMPT_USER$PROMPT_DIR$PROMPT_BRANCH \n$ "
fi
